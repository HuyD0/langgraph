# Agent model serving endpoint configuration
# 
# NOTE: This endpoint requires the model to be registered first.
# To deploy this endpoint:
# 1. First run: databricks bundle run agent_deployment -t dev
# 2. Rename this file to remove .disabled extension
# 3. Run: databricks bundle deploy -t dev
#
resources:
  model_serving_endpoints:
    agent_serving_endpoint:
      name: ${var.catalog}_${var.schema}_${var.model_name}_endpoint
      config:
        served_entities:
          - entity_name: ${var.catalog}.${var.schema}.${var.model_name}
            entity_version: "1"  # Start with version 1, update as needed
            scale_to_zero_enabled: true
            workload_size: Small  # Small, Medium, or Large
            workload_type: CPU    # CPU or GPU
